__NUXT_JSONP__("/development/umpkg", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah){return {data:[{document:{slug:I,description:"Build and push packages with the Ultramarine Packager.",title:"Using umpkg",position:41,category:"Development",toc:[{id:J,depth:v,text:K},{id:L,depth:v,text:M},{id:N,depth:v,text:O},{id:P,depth:v,text:Q},{id:R,depth:v,text:S},{id:T,depth:3,text:U},{id:V,depth:v,text:W}],body:{type:"root",children:[{type:b,tag:f,props:{},children:[{type:a,value:"Since Ultramarine Linux is based on Fedora, "},{type:b,tag:h,props:{href:"https:\u002F\u002Flapis.ultramarine-linux.org\u002Fkoji\u002F",rel:[k,l,m],target:n},children:[{type:a,value:"Koji"}]},{type:a,value:" is used to manage builds and packages. From "},{type:b,tag:h,props:{href:"https:\u002F\u002Ffedoraproject.org\u002Fwiki\u002FKoji",rel:[k,l,m],target:n},children:[{type:a,value:"Fedora Wiki"}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:"blockquote",props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Koji is the software that builds RPM packages for the Fedora project. It uses "},{type:b,tag:h,props:{href:"https:\u002F\u002Frpm-software-management.github.io\u002Fmock\u002F",rel:[k,l,m],target:n},children:[{type:a,value:"Mock"}]},{type:a,value:" to create chroot environments to perform builds."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To make package management easier for everyone, Ultramarine Linux developers have created the Ultramarine Packager, aka. "},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fultramarine-linux\u002Fumpkg",rel:[k,l,m],target:n},children:[{type:b,tag:d,props:{},children:[{type:a,value:I}]}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The latest version as of writing is "},{type:b,tag:d,props:{},children:[{type:a,value:"0.3.3"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:w,props:{id:J},children:[{type:b,tag:h,props:{href:"#getting-started",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:K}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Install umpkg with "},{type:b,tag:d,props:{},children:[{type:a,value:"dnf install umpkg"}]},{type:a,value:". umpkg is already in ultramarine's dnf repository."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Initialise your koji profile (for Ultramarine Linux by default) and RPM build environment with "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg setup"}]},{type:a,value:". The profile will be located at "},{type:b,tag:d,props:{},children:[{type:a,value:"~\u002F.koji\u002Fconfig.d\u002Fultramarine.conf"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Login with "},{type:b,tag:d,props:{},children:[{type:a,value:"kinit "}]},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:"username"}]}]},{type:b,tag:d,props:{},children:[{type:a,value:"@ULTRAMARINE-LINUX.ORG"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:"alert",props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To get a Kerberos principal for pushing Ultramarine packages to the build system, sign up for an account at "},{type:b,tag:h,props:{href:"https:\u002F\u002Fauth.ultramarine-linux.org\u002Fauth\u002Frealms\u002Fultramarine\u002Faccount\u002F",rel:[k,l,m],target:n},children:[{type:a,value:"The Ultramarine Accounts Portal"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"GitHub logins may not work if you do not have a full name and last name in your GitHub profile. This is a FreeIPA limitation."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:w,props:{id:L},children:[{type:b,tag:h,props:{href:"#configurations",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:M}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Most umpkg-related configurations can be set within "},{type:b,tag:d,props:{},children:[{type:a,value:".\u002Fumpkg.toml"}]},{type:a,value:" when inside a package, or globally "},{type:b,tag:d,props:{},children:[{type:a,value:X}]},{type:a,value:", including:"}]},{type:a,value:c},{type:b,tag:Y,props:{},children:[{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:Z}]},{type:a,value:", a command ran before building SRPMs"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:_}]},{type:a,value:" (either "},{type:b,tag:d,props:{},children:[{type:a,value:"mock"}]},{type:a,value:" or "},{type:b,tag:d,props:{},children:[{type:a,value:"rpmbuild"}]},{type:a,value:")"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:$}]},{type:a,value:", the path to the "},{type:b,tag:d,props:{},children:[{type:a,value:".spec"}]},{type:a,value:" file relative to the directory"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:aa}]},{type:a,value:", the koji username who owns the package"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:ab}]},{type:a,value:", the link to the git repository of the package"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:"strong",props:{},children:[{type:a,value:"WARN: strings in "},{type:b,tag:d,props:{},children:[{type:a,value:".toml"}]},{type:a,value:" files have to be \"double-quoted\"!"}]}]},{type:a,value:c},{type:b,tag:w,props:{id:N},children:[{type:b,tag:h,props:{href:"#downloading-a-package",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:O}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Even though you can clone a package repository directly with "},{type:b,tag:d,props:{},children:[{type:a,value:"git"}]},{type:a,value:", you can still download a package with "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg get "}]},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:D}]}]},{type:a,value:". umpkg will download the package by adding "},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:D}]}]},{type:a,value:" to the url specified in global config."}]},{type:a,value:c},{type:b,tag:w,props:{id:P},children:[{type:b,tag:h,props:{href:"#making-a-new-package",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:ac},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg init "}]},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:D}]}]},{type:a,value:" to create a new package. umpkg will automatically create:"}]},{type:a,value:c},{type:b,tag:Y,props:{},children:[{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:"a directory named after the package"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:"a spec file named after the package"}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:ad}]},{type:a,value:" with default information of the package"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For example, if the following is in "},{type:b,tag:d,props:{},children:[{type:a,value:X}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,ae]},children:[{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:"repo"}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"https:\u002F\u002Fgithub.com\u002Fultramarine-linux\u002F\""}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Running "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg init discord-canary"}]},{type:a,value:" will result in the following file system structure:"}]},{type:a,value:c},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,"language-text"]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"discord-canary\u002F\ndiscord-canary\u002Fumpkg.toml\ndiscord-canary\u002Fdiscord-canary.spec\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"And within "},{type:b,tag:d,props:{},children:[{type:a,value:ad}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,ae]},children:[{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:"["}]},{type:b,tag:e,props:{className:[g,"table","class-name"]},children:[{type:a,value:"discord-canary"}]},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:"]"}]},{type:a,value:c},{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:$}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"discord-canary.spec\""}]},{type:a,value:c},{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:Z}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"\""}]},{type:a,value:c},{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:_}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"mock\""}]},{type:a,value:c},{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"your koji username\""}]},{type:a,value:c},{type:b,tag:e,props:{className:[g,y,z]},children:[{type:a,value:ab}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,p]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:e,props:{className:[g,B]},children:[{type:a,value:"\"https:\u002F\u002Fgithub.com\u002Fultramarine-linux\u002Fdiscord-canary\""}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Remember to replace owner with your actual koji username!"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The spec file is also generated automatically, but you still have to edit the content, including "},{type:b,tag:d,props:{},children:[{type:a,value:"%install"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"%files"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"%changelog"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"Version"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"Summary"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"URL"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"Source0"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"License"}]},{type:a,value:q},{type:b,tag:d,props:{},children:[{type:a,value:"Requires"}]},{type:a,value:", and "},{type:b,tag:d,props:{},children:[{type:a,value:"Group"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Read about spec files here: "},{type:b,tag:h,props:{href:af,rel:[k,l,m],target:n},children:[{type:a,value:af}]}]},{type:a,value:c},{type:b,tag:w,props:{id:R},children:[{type:b,tag:h,props:{href:"#building-packages",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:S}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:ac},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg build"}]},{type:a,value:" to build an RPM package."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you only need the SRPM package, run "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg buildsrc"}]},{type:a,value:" instead."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In case you are not in the package folder, supply "},{type:b,tag:d,props:{},children:[{type:a,value:"-d path\u002Fto\u002Ffolder"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:"h3",props:{id:T},children:[{type:b,tag:h,props:{href:"#build-script",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:U}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you only want to run the build scripts, run "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg bs"}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:w,props:{id:V},children:[{type:b,tag:h,props:{href:"#pushingadding-packages-to-koji",ariaHidden:r,tabIndex:s},children:[{type:b,tag:e,props:{className:[t,u]},children:[]}]},{type:a,value:W}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"After building your package, you have to upload the package to Koji so that it can be published."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If the package is not in Koji, run "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg add "}]},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:"tag"}]}]},{type:a,value:".\nSee all the tags for Ultramarine Linux "},{type:b,tag:h,props:{href:"https:\u002F\u002Flapis.ultramarine-linux.org\u002Fkoji\u002Ftags",rel:[k,l,m],target:n},children:[{type:a,value:ag}]},{type:a,value:j}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For pushing, run "},{type:b,tag:d,props:{},children:[{type:a,value:"umpkg push "}]},{type:b,tag:x,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:"target"}]}]},{type:a,value:".\nFor the list of available build targets in Ultramarine Linux, see "},{type:b,tag:h,props:{href:"https:\u002F\u002Flapis.ultramarine-linux.org\u002Fkoji\u002Fbuildtargets",rel:[k,l,m],target:n},children:[{type:a,value:ag}]},{type:a,value:j}]}]},dir:"\u002Fen\u002Fdevelopment",path:"\u002Fen\u002Fdevelopment\u002Fumpkg",extension:".md",createdAt:ah,updatedAt:ah,to:"\u002Fdevelopment\u002Fumpkg"},prev:{title:"Developing for Ultramarine",path:"\u002Fen\u002Fdevelopment\u002Fdeveloping-for-ultramarine",to:"\u002Fdevelopment\u002Fdeveloping-for-ultramarine"},next:{title:"Errata",path:"\u002Fen\u002Frelease\u002Ferrata",to:"\u002Frelease\u002Ferrata"}}],fetch:{},mutations:[]}}("text","element","\n","code","span","p","token","a"," ",".","nofollow","noopener","noreferrer","_blank","li","punctuation",", ","true",-1,"icon","icon-link",2,"h2","em","key","property","=","string",":","pkgname","div","nuxt-content-highlight","pre","line-numbers","umpkg","getting-started","Getting Started","configurations","Configurations","downloading-a-package","Downloading a package","making-a-new-package","Making a new package","building-packages","Building packages","build-script","Build script","pushingadding-packages-to-koji","Pushing\u002FAdding packages to Koji","~\u002F.config\u002Fumpkg.toml","ul","build_script","build_method","spec","owner","git_repo","Run ","umpkg.toml","language-toml","https:\u002F\u002Fdocs.fedoraproject.org\u002Fen-US\u002Fpackaging-guidelines\u002F#_spec_files","here","2022-05-31T19:54:30.551Z")));